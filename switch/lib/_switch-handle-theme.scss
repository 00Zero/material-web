//
// Copyright 2022 Google LLC
// SPDX-License-Identifier: Apache-2.0
//

// stylelint-disable selector-class-pattern --
// Selector '.md3-*' should only be used in this project.

@use 'sass:map';

@use '../../ripple/ripple-theme';

@mixin theme-styles($theme) {
  .md3-switch__handle-container {
    $margin: calc(map.get($theme, track-width) - map.get($theme, track-height));

    .md3-switch--selected & {
      margin-inline-start: $margin;
    }

    .md3-switch--unselected & {
      margin-inline-end: $margin;
    }
  }

  .md3-switch__handle {
    // Handle shape
    border-start-start-radius: map.get($theme, handle-shape-start-start);
    border-start-end-radius: map.get($theme, handle-shape-start-end);
    border-end-end-radius: map.get($theme, handle-shape-end-end);
    border-end-start-radius: map.get($theme, handle-shape-end-start);
    height: map.get($theme, handle-height);
    width: map.get($theme, handle-width);
    background-color: map.get($theme, selected-handle-color);

    // TODO(b/230484095): Use token instead of hard coded values
    .md3-switch--selected &,
    .md3-switch--unselected &.md3-switch__handle--big {
      transform: scale(1.2);
    }
    .md3-switch--unselected & {
      transform: scale(0.8);
    }
    .md3-switch--selected:enabled:active &,
    .md3-switch--unselected:enabled:active & {
      transform: scale(1.4);
    }

    .md3-switch--selected:hover & {
      background-color: map.get($theme, selected-hover-handle-color);
    }

    .md3-switch--selected:focus-visible & {
      background-color: map.get($theme, selected-focus-handle-color);
    }

    .md3-switch--selected:active & {
      background-color: map.get($theme, selected-pressed-handle-color);
    }

    .md3-switch--selected:disabled & {
      background-color: map.get($theme, disabled-selected-handle-color);
    }

    &::before {
      background-color: map.get($theme, unselected-handle-color);

      .md3-switch--unselected:hover & {
        background-color: map.get($theme, unselected-hover-handle-color);
      }

      .md3-switch--unselected:focus-visible & {
        background-color: map.get($theme, unselected-focus-handle-color);
      }

      .md3-switch--unselected:active & {
        background-color: map.get($theme, unselected-pressed-handle-color);
      }

      .md3-switch--unselected:disabled & {
        background-color: map.get($theme, disabled-unselected-handle-color);
      }
    }
  }

  .md3-switch__ripple {
    height: map.get($theme, state-layer-size);
    width: map.get($theme, state-layer-size);

    .md3-switch--selected & {
      @include ripple-theme.theme(
        (
          hover-state-layer-color:
            map.get($theme, selected-hover-state-layer-color),
          focus-state-layer-color:
            map.get($theme, selected-focus-state-layer-color),
          pressed-state-layer-color:
            map.get($theme, selected-pressed-state-layer-color),
          hover-state-layer-opacity:
            map.get($theme, selected-hover-state-layer-opacity),
          focus-state-layer-opacity:
            map.get($theme, selected-focus-state-layer-opacity),
          pressed-state-layer-opacity:
            map.get($theme, selected-pressed-state-layer-opacity),
        )
      );
    }

    .md3-switch--unselected & {
      @include ripple-theme.theme(
        (
          hover-state-layer-color:
            map.get($theme, unselected-hover-state-layer-color),
          focus-state-layer-color:
            map.get($theme, unselected-focus-state-layer-color),
          pressed-state-layer-color:
            map.get($theme, unselected-pressed-state-layer-color),
          hover-state-layer-opacity:
            map.get($theme, unselected-hover-state-layer-opacity),
          focus-state-layer-opacity:
            map.get($theme, unselected-focus-state-layer-opacity),
          pressed-state-layer-opacity:
            map.get($theme, unselected-pressed-state-layer-opacity),
        )
      );
    }
  }
}
