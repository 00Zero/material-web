//
// Copyright 2022 Google LLC
// SPDX-License-Identifier: Apache-2.0
//

// stylelint-disable selector-class-pattern --
// Selector '.md3-*' should only be used in this project.

@use 'sass:map';
@use 'sass:string';
@use '../../../sass/resolvers';
@use '../../../sass/theme';
@use '../icon/list-item-icon-theme';
@use '../image/list-item-image-theme';
@use '../video/list-item-video-theme';
@use '../tokens';

$light-theme: tokens.md-comp-list-values();

@function _resolve-theme($theme, $resolvers) {
  @return $theme;
}

@mixin theme($theme, $resolvers: resolvers.$material) {
  $theme: theme.validate-theme($light-theme, $theme);
  $theme: _resolve-theme($theme, $resolvers);
  $theme: theme.create-theme-vars($theme, list);

  @include theme.emit-theme-vars($theme);
}

@mixin theme-styles($theme, $resolvers: resolvers.$material) {
  $theme: theme.validate-theme($light-theme, $theme);
  $theme: _resolve-theme($theme, $resolvers);
  $theme: theme.create-theme-vars($theme, list);

  background-color: map.get($theme, list-item-container-color);
  border-radius: map.get($theme, list-item-container-shape);

  .md3-list-item__label-text {
    color: map.get($theme, list-item-label-text-color);
    font-family: map.get($theme, list-item-label-text-font);
    font-size: map.get($theme, list-item-label-text-size);
    letter-spacing: map.get($theme, list-item-label-text-tracking);
    font-weight: map.get($theme, list-item-label-text-weight);
    line-height: map.get($theme, list-item-label-text-line-height);
  }

  .md3-list-item__supporting-text {
    color: map.get($theme, list-item-supporting-text-color);
    font-family: map.get($theme, list-item-supporting-text-font);
    font-size: map.get($theme, list-item-supporting-text-size);
    letter-spacing: map.get($theme, list-item-supporting-text-tracking);
    font-weight: map.get($theme, list-item-supporting-text-weight);
    line-height: map.get($theme, list-item-supporting-text-line-height);
  }

  .md3-list-item__trailing-supporting-text {
    font-family: map.get($theme, list-item-trailing-supporting-text-font);
    font-size: map.get($theme, list-item-trailing-supporting-text-size);
    letter-spacing: map.get(
      $theme,
      list-item-trailing-supporting-text-tracking
    );
    font-weight: map.get($theme, list-item-trailing-supporting-text-weight);
    line-height: map.get(
      $theme,
      list-item-trailing-supporting-text-line-height
    );
  }

  &.md3-list-item--disabled {
    .md3-list-item__label-text {
      color: map.get($theme, list-item-disabled-label-text-color);
      opacity: map.get($theme, list-item-disabled-label-text-opacity);
    }

    .md3-list-item__supporting-text {
      color: map.get($theme, list-item-disabled-supporting-text-color);
      opacity: map.get($theme, list-item-disabled-supporting-text-opacity);
    }
  }

  &:not(.md3-list-item--disabled) {
    .md3-list-item__trailing-supporting-text {
      color: map.get($theme, list-item-trailing-supporting-text-color);
    }
  }

  &.md3-list-item--with-one-line {
    min-height: map.get($theme, list-item-one-line-container-height);
  }

  &.md3-list-item--with-two-line {
    min-height: map.get($theme, list-item-two-line-container-height);
  }

  &.md3-list-item--with-three-line {
    min-height: map.get($theme, list-item-three-line-container-height);
  }

  @include list-item-image-theme.theme(
    (
      list-item-leading-image-height:
        map.get($theme, list-item-leading-image-height),
      list-item-leading-image-width:
        map.get($theme, list-item-leading-image-width),
      list-item-leading-image-shape:
        map.get($theme, list-item-leading-image-shape),
    )
  );
  @include list-item-video-theme.theme(
    (
      list-item-leading-video-height:
        map.get($theme, list-item-leading-video-height),
      list-item-leading-video-width:
        map.get($theme, list-item-leading-video-width),
      list-item-leading-video-shape:
        map.get($theme, list-item-leading-video-shape),
    )
  );

  .md3-list-item__start {
    @include list-item-icon-theme.theme(
      (
        list-item-icon-color: map.get($theme, list-item-leading-icon-color),
        list-item-icon-size: map.get($theme, list-item-leading-icon-size),
      )
    );
  }

  .md3-list-item__end {
    @include list-item-icon-theme.theme(
      (
        list-item-icon-color: map.get($theme, list-item-trailing-icon-color),
        list-item-icon-size: map.get($theme, list-item-trailing-icon-size),
      )
    );
  }

  &.md3-list-item--disabled .md3-list-item__start {
    @include list-item-icon-theme.theme(
      (
        list-item-icon-color:
          map.get($theme, list-item-disabled-leading-icon-color),
        list-item-icon-opacity:
          map.get($theme, list-item-disabled-leading-icon-opacity),
      )
    );
  }

  &.md3-list-item--disabled .md3-list-item__end {
    @include list-item-icon-theme.theme(
      (
        list-item-icon-color:
          map.get($theme, list-item-disabled-trailing-icon-color),
        list-item-icon-opacity:
          map.get($theme, list-item-disabled-trailing-icon-opacity),
      )
    );
  }

  &:hover .md3-list-item__start {
    @include list-item-icon-theme.theme(
      (
        list-item-icon-color:
          map.get($theme, list-item-hover-leading-icon-color),
      )
    );
  }

  &:hover .md3-list-item__end {
    @include list-item-icon-theme.theme(
      (
        list-item-icon-color:
          map.get($theme, list-item-hover-trailing-icon-color),
      )
    );
  }
}
